# React Notion Clone

React と TypeScript を使用したNotionクローンアプリケーションです。Supabaseをバックエンドに、ユーザー認証とノート管理機能を実装したモダンなWebアプリケーションです。

## ✨ 実装済み機能

### 🔐 ユーザー認証システム（完全実装）
- ユーザー登録・ログイン・ログアウト機能
- セッション管理と自動ログイン
- 認証ガードによるページ保護
- Supabase Authを使用した安全な認証

### 📝 ノート管理機能（基本機能実装済み）
- ✅ ノート作成（タイトル付き・無題）
- ✅ ノート一覧表示
- ✅ ユーザー別ノート管理
- 🚧 ノート詳細表示・編集（開発中）
- 🚧 ノート削除機能（未実装）

### 🎨 モダンUI・UX
- Tailwind CSS v4 + Radix UIによるレスポンシブデザイン
- サイドバー付きレイアウト
- ユーザードロップダウンメニュー
- 統一されたUIコンポーネントシステム

### ⚙️ 技術基盤
- TypeScriptによる型安全性
- Jotaiによる軽量状態管理
- リポジトリパターンによるクリーンアーキテクチャ

## 🛠️ 技術スタック

### フロントエンド
- **React 18** - UIライブラリ
- **TypeScript** - 型安全性のためのプログラミング言語
- **Vite** - 高速なビルドツール
- **React Router v7** - クライアントサイドルーティング

### スタイリング
- **Tailwind CSS v4** - ユーティリティファーストCSSフレームワーク
- **Radix UI** - アクセシブルなヘッドレスUIコンポーネント
- **Lucide React** - アイコンライブラリ

### 状態管理・データ
- **Jotai** - 軽量な状態管理ライブラリ
- **Supabase** - バックエンドサービス（認証・PostgreSQLデータベース）
- **lodash-es** - ユーティリティライブラリ

### 開発ツール
- **ESLint** - コード品質チェック
- **Prettier** - コードフォーマッター
- **TypeScript ESLint** - TypeScript用リンター

## 🚀 セットアップ手順

### 前提条件
- Node.js 22.17.0 以上（Voltaによる管理）
- pnpm パッケージマネージャー
- Supabaseアカウント

### インストール
```bash
# リポジトリのクローン
git clone <repository-url>
cd learn--udemy-react-notion

# 依存関係のインストール
pnpm install

# 環境変数の設定
cp .env.example .env.local
# .env.localファイルでSupabaseの設定を行う
```

### Supabaseの設定

1. [Supabase](https://supabase.com)でプロジェクトを作成
2. 以下のSQLを実行してnotesテーブルを作成：

```sql
create table public.notes (
  id bigint generated by default as identity primary key,
  title text,
  content text,
  user_id uuid references auth.users not null,
  parent_document bigint references public.notes,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- RLS (Row Level Security) を有効化
alter table public.notes enable row level security;

-- ユーザーは自分のノートのみアクセス可能
create policy "Users can manage their own notes" on public.notes
  for all using (auth.uid() = user_id);
```

3. `.env.local`ファイルに環境変数を設定：

```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_API_KEY=your_supabase_anon_key
```

### 開発サーバーの起動
```bash
pnpm dev
```

アプリケーションは `http://localhost:5173` で起動します。

## 📦 利用可能なコマンド

```bash
# 開発サーバー起動
pnpm dev

# プロダクションビルド
pnpm build

# コードチェック
pnpm lint

# プレビューサーバー起動（ビルド後）
pnpm preview
```

## 📁 プロジェクト構造

```
src/
├── components/          # 再利用可能なコンポーネント
│   ├── Auth/           # 認証関連コンポーネント
│   ├── Form/           # フォームコンポーネント
│   ├── NoteList/       # ノート一覧コンポーネント
│   │   ├── index.tsx   # ノートリスト表示
│   │   └── NoteItem.tsx # ノートアイテム
│   ├── SideBar/        # サイドバーコンポーネント
│   └── ui/             # 基本UIコンポーネント（Button, Input, Card等）
├── hooks/              # カスタムフック
├── lib/                # ユーティリティ・ライブラリ設定
│   ├── supabase.ts     # Supabase設定
│   └── utils.ts        # 汎用ユーティリティ
├── modules/            # 機能別モジュール
│   ├── auth/           # 認証関連ロジック
│   │   ├── auth.repository.ts   # 認証API操作
│   │   └── current-user.state.ts # ユーザー状態管理
│   └── notes/          # ノート関連ロジック
│       ├── note.entity.ts     # ノートエンティティ定義
│       ├── note.repository.ts # ノートAPI操作
│       └── note.state.ts      # ノート状態管理
├── pages/              # ページコンポーネント
│   ├── Home.tsx        # ホームページ（ノート作成）
│   ├── NoteDetail.tsx  # ノート詳細ページ（開発中）
│   ├── Signin.tsx      # サインインページ
│   └── Signup.tsx      # サインアップページ
├── App.tsx             # メインアプリケーションコンポーネント
├── Layout.tsx          # レイアウトコンポーネント
├── database.types.ts   # Supabaseデータベース型定義
└── main.tsx            # アプリケーションエントリーポイント
```

## 🔑 機能詳細

### 現在利用可能な機能

#### 認証システム
- **ユーザー登録**: 名前、メール、パスワードでアカウント作成
- **ログイン**: メール・パスワード認証
- **自動ログイン**: セッション情報の永続化
- **ログアウト**: 安全なセッション終了
- **認証ガード**: 未認証時の自動リダイレクト

#### ノート機能
- **ノート作成**: 
  - ホームページでタイトル付きノート作成
  - サイドバーで無題ノート作成
- **ノート一覧**: サイドバーでのノート表示（作成日時順）
- **ユーザー分離**: ユーザーごとのノート管理

### ルーティング
- `/` - ホームページ（ノート作成画面、認証必須）
- `/notes/:id` - ノート詳細ページ（開発中、認証必須）
- `/signin` - ログインページ
- `/signup` - 新規登録ページ

### データベース設計
**notesテーブル構造:**
- `id` - 主キー
- `title` - ノートタイトル
- `content` - ノート内容（将来のリッチテキスト用）
- `user_id` - 作成者ID
- `parent_document` - 親ノートID（階層構造用）
- `created_at` - 作成日時

### アーキテクチャパターン
- **リポジトリパターン**: `auth.repository.ts`, `note.repository.ts`
- **状態管理**: Jotaiによる軽量状態管理
- **型安全性**: database.types.tsによる完全な型定義
- **モジュラー設計**: 機能別のディレクトリ構成

## 🧪 開発情報

### コード規約
- ESLint設定による自動チェック
- Prettierによる自動フォーマット
- TypeScriptによる型安全性

### ビルド・デプロイ
```bash
# プロダクションビルド
pnpm build

# ビルドファイルのプレビュー
pnpm preview
```

### 推奨開発環境
- **IDE**: VS Code
- **拡張機能**: ESLint、Prettier、TypeScript、Tailwind CSS IntelliSense

## 📝 開発ロードマップ

### 🚧 開発中の機能
- [ ] ノート詳細表示・編集機能
- [ ] 検索機能（UIは実装済み）
- [ ] ノートの階層表示

### 🔮 今後の開発予定
- [ ] ノート削除機能
- [ ] リッチテキストエディタの統合
- [ ] ノートの並び替え・移動
- [ ] タグ・カテゴリ機能
- [ ] ファイルアップロード機能
- [ ] リアルタイム同期機能
- [ ] コラボレーション機能

### 📊 現在の実装状況
- ✅ **認証システム**: 100% 完成
- ✅ **基本UI**: 100% 完成
- 🟡 **ノート管理**: 50% 完成（作成・一覧のみ）
- 🔴 **高度な機能**: 0% 未着手

## 🤝 貢献

このプロジェクトは学習目的で作成されています。改善提案やバグ報告は Issue または Pull Request でお知らせください。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。